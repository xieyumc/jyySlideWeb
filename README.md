# featureğŸš€
å¯ä»¥å°è¯•è®¿é—®åœ¨çº¿[demo](http://slide.yuyu.pub/public/)ï¼Œç›´æ¥æŸ¥çœ‹æ•ˆæœğŸ‘€

![realtime-converter.gif](staticfiles/img/realtime-converter.gif)
> å®æ—¶è½¬æ¢ï¼šå·¦è¾¹è¾“å…¥markdownï¼Œå³è¾¹å¯ä»¥å®æ—¶çœ‹åˆ°ç”Ÿæˆçš„æ•ˆæœ

<br><br>


![realtime-preview.gif](staticfiles/img/realtime-preview.gif)
>å¹»ç¯ç‰‡è‡ªåŠ¨åˆ‡æ¢åˆ°æ­£åœ¨ç¼–è¾‘ä½ç½®ï¼šå³è¾¹å¹»ç¯ç‰‡é¢„è§ˆä¼šå’Œå·¦è¾¹ç¼–è¾‘ä½ç½®å®æ—¶å¯¹åº”ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ•ˆæœ

<br><br>


![auto-save.png](staticfiles/img/auto-save.png)
> è‡ªåŠ¨ä¿å­˜ï¼šç¼–è¾‘å¹»ç¯ç‰‡æ—¶æ¯åˆ†é’Ÿéƒ½ä¼šè‡ªåŠ¨ä¿å­˜ä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨å…³é—­çª—å£ï¼Œè¿”å›ä¸»é¡µæ—¶éƒ½ä¼šè‡ªåŠ¨ä¿å­˜

<br><br>


![auto-title.jpg](staticfiles/img/auto-title.jpg)
> è‡ªåŠ¨è¯»å–æ ‡é¢˜ï¼šå¹»ç¯ç‰‡çš„æ ‡é¢˜ä¼šè‡ªåŠ¨ä»æ–‡ç« ä¸­è¯»å–ï¼Œç”±ç¬¬ä¸€ä¸ª#æ ‡é¢˜å†³å®š

<br><br>


![auto-upload-img.gif](staticfiles/img/auto-upload-img.gif)
> å¿«æ·æ’å…¥å›¾ç‰‡ï¼šå¯ä»¥ç›´æ¥æ‹–æ‹½æˆ–è€…ctrl+vç²˜è´´å›¾ç‰‡åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œå›¾ç‰‡ä¼šè‡ªåŠ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç”Ÿæˆçš„é“¾æ¥ä¼šè‡ªåŠ¨è½¬æ¢æˆmarkdownæ ¼å¼ï¼Œæ’å…¥åˆ°ç¼–è¾‘å™¨ä¸­

<br><br>


![img.png](staticfiles/img/public-mode.png)
> å…¬å¼€åˆ†äº«å¹»ç¯ç‰‡ï¼šå¹»ç¯ç‰‡é»˜è®¤éœ€è¦å¯†ç æ‰èƒ½è®¿é—®ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æˆå…¬å¼€çš„æ¥åˆ†äº«ï¼Œåœ¨å…¬å¼€æ¨¡å¼ä¸‹å¹»ç¯ç‰‡æ˜¯åªè¯»çš„


# å¿«é€Ÿå®‰è£…
> æœ¬é¡¹ç›®å¯ä»¥åœ¨ä»»ä½•å¹³å°è¿è¡Œï¼Œé’ˆå¯¹Windowså¹³å°è¿˜æœ‰ç¼–è¯‘å¥½çš„exeæ–‡ä»¶ï¼Œè€Œå…¶ä»–å¹³å°æ¨èä½¿ç”¨dockerå®‰è£…

## Windowsç›´æ¥è¿è¡Œç¼–è¯‘å¥½çš„exe

åœ¨[release](https://github.com/xieyumc/jyySlideWeb/releases)ç½‘é¡µä¸­ï¼Œä¸‹è½½`jyy_slide_web.zip`ï¼Œä¸‹è½½åè§£å‹å‹ç¼©åŒ…ï¼ˆè¯·å®Œæ•´è§£å‹ï¼Œä¸è¦åªè§£å‹exeï¼‰æ‰“å¼€`jyy_slide_web.exe`å³å¯è¿è¡Œ
> ä½¿ç”¨è¿™ä¸ªæ–¹å¼éƒ¨ç½²ï¼Œå®æ—¶è½¬æ¢æ—¶æ•ˆç‡å¾ˆä½ï¼Œè½¬æ¢å¾ˆæ…¢ï¼Œæˆ‘æ­£åœ¨å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿PR
>
é¡¹ç›®ä¼šè¿è¡Œåœ¨æœ¬åœ°10001ç«¯å£ï¼Œæ¥ä¸‹æ¥è¯·å‚è€ƒä¸‹ä¸€èŠ‚çš„[å¿«é€Ÿä¸Šæ‰‹](#å¿«é€Ÿä¸Šæ‰‹)è¿›è¡Œæ“ä½œ

- æ–‡ç« æ•°æ®ä¼šå­˜å‚¨åœ¨`_internal`æ–‡ä»¶å¤¹ä¸­çš„`db.sqlite3`æ–‡ä»¶ä¸­
- ä¸Šä¼ å›¾ç‰‡çš„å›¾ç‰‡åœ¨`_internal`æ–‡ä»¶å¤¹ä¸­çš„`media`æ–‡ä»¶å¤¹ä¸­ 
- è‹¥è¦å‡çº§è½¯ä»¶åéœ€è¦è¿ç§»æ•°æ®ï¼Œåªéœ€è¦å¤åˆ¶è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹å³å¯


## ä½¿ç”¨dockerå®‰è£…

åœ¨ä»“åº“æ ¹ç›®å½•ä¸‹è½½ï¼š

- [docker-compose.yml](docker-compose.yml)
- [db.sqlite3](db.sqlite3)

ç„¶ååœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª`media`æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ä¸Šä¼ å›¾ç‰‡ç”¨çš„

æ­¤æ—¶ï¼Œä½ çš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

```
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ db.sqlite3
â””â”€â”€ media
    â””â”€â”€ xxx.img
```
ç„¶åï¼Œä½ éœ€è¦åœ¨[docker-compose.yml](docker-compose.yml)æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹CSRF_TRUSTED_ORIGINS
```
environment:
  - CSRF_TRUSTED_ORIGINS=https://localhost,https://yourdomain.com  # å®šä¹‰CSRFä¿¡ä»»åŸŸ
```
è¿™ä¸ªç¯å¢ƒå˜é‡æ˜¯ç”¨æ¥å®šä¹‰CSRFä¿¡ä»»åŸŸçš„ï¼Œå¦‚æœä½ çš„åŸŸåæ˜¯`yourdomain.com`ï¼Œé‚£ä¹ˆä½ éœ€è¦æŠŠ`https://yourdomain.com`æ”¹æˆä½ çš„åŸŸåï¼ˆå¦‚æœä½ ä¸ä½¿ç”¨httpsï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®ï¼‰


ç„¶åè¿è¡Œï¼š

```bash
docker-compose up
```

é¡¹ç›®ä¼šè¿è¡Œåœ¨æœ¬åœ°10001ç«¯å£ï¼Œå¹¶ä¸”å€ŸåŠ©watchtowerï¼Œä¼šè‡ªåŠ¨æ›´æ–°å®¹å™¨

æ¥ä¸‹æ¥è¯·å‚è€ƒä¸‹ä¸€èŠ‚çš„[å¿«é€Ÿä¸Šæ‰‹](#å¿«é€Ÿä¸Šæ‰‹)è¿›è¡Œæ“ä½œ

## ä»æºç å®‰è£…

- ä¸‹è½½æºç 

- åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•

- `pip install -r requirements.txt`

- `daphne -p 10001 jyy_slide_web.asgi:application`

é¡¹ç›®ä¼šè¿è¡Œåœ¨æœ¬åœ°10001ç«¯å£ï¼Œæ¥ä¸‹æ¥è¯·å‚è€ƒä¸‹ä¸€èŠ‚çš„[å¿«é€Ÿä¸Šæ‰‹](#å¿«é€Ÿä¸Šæ‰‹)è¿›è¡Œæ“ä½œ


# å¿«é€Ÿä¸Šæ‰‹

## è®¿é—®ä¸»é¡µå’Œä¿®æ”¹å¯†ç 
å®‰è£…å¥½é¡¹ç›®åï¼Œè®¿é—®`http://localhost:10001/` å³å¯è®¿é—®ä¸»é¡µ

é»˜è®¤è´¦å·æ˜¯`admin`ï¼Œå¯†ç æ˜¯`admin@django`

è‹¥éœ€è¦ä¿®æ”¹å¯†ç ï¼Œè¯·è®¿é—®`http://localhost:10001/admin/` ç„¶åç‚¹å‡»å³ä¸Šè§’çš„`Change password`

## ç¼–å†™å¹»ç¯ç‰‡
è®¿é—®`http://localhost:10001/` ï¼Œç‚¹å‡»`æ–°å»ºå¹»ç¯ç‰‡`

![index.png](staticfiles/img/index.png)

å¯ä»¥çœ‹åˆ°æˆ‘å·²ç»å†™å¥½äº†ä¸¤å¼ æ•™ç¨‹å¹»ç¯ç‰‡ï¼ŒåŸºç¡€è¯­æ³•å¯ä»¥ç›´æ¥é…åˆå¹»ç¯ç‰‡å†…å®¹è¿›è¡Œå­¦ä¹ 

## åˆ†äº«å¹»ç¯ç‰‡
æ¯å¼ å¹»ç¯ç‰‡åˆ›å»ºæ—¶é»˜è®¤éƒ½æ˜¯ä¸Šé”çš„ï¼ˆå·¦ä¸Šè§’çš„é”ï¼‰

![slide-lock.png](staticfiles/img/slide-lock.png)

å¦‚æœéœ€è¦åˆ†äº«å¹»ç¯ç‰‡ï¼Œå¯ä»¥ç‚¹å‡»å·¦ä¸Šè§’é”çš„æŒ‰é’®ï¼Œè¿™ä¸ªå¹»ç¯ç‰‡å°±ä¼šå˜æˆå…¬å¼€å¹»ç¯ç‰‡

ç„¶åè®¿é—®`http://localhost:10001/public/` å³å¯çœ‹åˆ°æ‰€æœ‰å…¬å¼€çš„å¹»ç¯ç‰‡ï¼Œè¿™ä¸ªç•Œé¢ä¸éœ€è¦å¯†ç ä¹Ÿå¯ä»¥è®¿é—®

åœ¨è¿™ä¸ªå…¬å¼€æ¨¡å¼ä¸‹ï¼Œå¹»ç¯ç‰‡æ˜¯åªè¯»çš„ï¼Œå¹¶ä¸”æ²¡æœ‰ç¼–è¾‘æ¡†ï¼Œä¼šç›´æ¥è¿›å…¥å…¨å±å±•ç¤º


![img.png](staticfiles/img/public-mode.png)

# é…ç½®nginx

å¦‚æœéœ€è¦é…ç½®nginxï¼Œç”±äºæœ¬é¡¹ç›®ä½¿ç”¨äº†websocketï¼Œéœ€è¦ä¸€äº›ç‰¹æ®Šçš„è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„é…ç½®

## httpé…ç½®
```nginx
server {
    listen 80;
    server_name yourdomain.com;  # å¡«å†™ä½ çš„åŸŸå

    location / {
        proxy_pass http://127.0.0.1:10001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Referer $http_referer;
        proxy_set_header Origin $http_origin;

        # WebSocket ç‰¹åˆ«é…ç½®
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
    # ä¸º /static è·¯å¾„çš„é™æ€èµ„æºè®¾ç½®ç¼“å­˜ç­–ç•¥
    location /static/ {

        proxy_pass http://127.0.0.1:10001;  # ä»£ç†åˆ°åç«¯æœåŠ¡å™¨
        
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Referer $http_referer;
        proxy_set_header Origin $http_origin;
        
        # è®¾ç½®æµè§ˆå™¨ç¼“å­˜å¤´ï¼Œç¼“å­˜30å¤©
        expires 30d;
        add_header Cache-Control "public, max-age=2592000";

        # å…è®¸è·¨åŸŸï¼ˆå¦‚æœéœ€è¦ï¼‰
        add_header Access-Control-Allow-Origin *;

        # ç¦ç”¨æ—¥å¿—ï¼ˆå¯é€‰ï¼Œå‡å°‘æ—¥å¿—é‡ï¼‰
        access_log off;
        }
        
    }
```

## httpså’Œhttp/3é…ç½®
```nginx
server {
        listen 443 ssl;
        listen 443 quic;
        listen [::]:443 quic;
        http2 on;

        server_name yourdomain.com;  # å¡«å†™ä½ çš„åŸŸå

        ssl_certificate /etc/nginx/certs/       # ä½ çš„SSLè¯ä¹¦
        ssl_certificate_key /etc/nginx/certs/   # ä½ çš„SSLè¯ä¹¦
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers HIGH:!aNULL:!MD5;

        location / {
            proxy_pass http://127.0.0.1:10001;
            
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Referer $http_referer;
            proxy_set_header Origin $http_origin;

            # WebSocket ç‰¹åˆ«é…ç½®
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            
            add_header Alt-Svc 'h3=":443"; ma=86400';


        }

        # ä¸º /static è·¯å¾„çš„é™æ€èµ„æºè®¾ç½®ç¼“å­˜ç­–ç•¥
        location /static/ {
            proxy_pass http://127.0.0.1:10001;  # ä»£ç†åˆ°åç«¯æœåŠ¡å™¨
            
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header Referer $http_referer;
            proxy_set_header Origin $http_origin;

            # è®¾ç½®æµè§ˆå™¨ç¼“å­˜å¤´ï¼Œç¼“å­˜30å¤©
            expires 30d;
            add_header Cache-Control "public, max-age=2592000";
            
            # å…è®¸è·¨åŸŸï¼ˆå¦‚æœéœ€è¦ï¼‰
             add_header Access-Control-Allow-Origin *;

            # ç¦ç”¨æ—¥å¿—ï¼ˆå¯é€‰ï¼Œå‡å°‘æ—¥å¿—é‡ï¼‰
            access_log off;
            add_header Alt-Svc 'h3=":443"; ma=86400';


        }
    }
```
# æ„Ÿè°¢ğŸ™

æœ¬é¡¹ç›®çš„çµæ„Ÿæ¥æºä¸ºå—äº¬å¤§å­¦çš„[jyyè€å¸ˆ](https://jyywiki.cn)

æœ¬é¡¹ç›®åŸºäº[jyyslide-md](https://github.com/zweix123/jyyslide-md)å¼€å‘ï¼Œæ„Ÿè°¢å¤§ä½¬å·²ç»æŠŠè½¬æ¢é€»è¾‘å®Œå–„äº†ï¼Œæœ¬äººåªæ˜¯åšäº†ä¸€äº›å¾®å°çš„å·¥ä½œ
